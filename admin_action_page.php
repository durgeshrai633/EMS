<?php
session_start();
$admin=$_SESSION['login_user'];
?>
<?php
           include("config.php"); 

        
        
           if($_SERVER["REQUEST_METHOD"] == "POST") {
                       
        $emp_id=mysqli_real_escape_string($db,$_POST['Emp_id']);
        $emp_name=mysqli_real_escape_string($db,$_POST['Emp_name']);
        $emp_mob=mysqli_real_escape_string($db,$_POST['Emp_mob']);
        $emp_gmail=mysqli_real_escape_string($db,$_POST['Emp_gmail']);
        $emp_doj=mysqli_real_escape_string($db,$_POST['D_O_J']);
        $m_id=mysqli_real_escape_string($db,$_POST['M_id']);
        $emp_jt=mysqli_real_escape_string($db,$_POST['J_T']);        
              $sql="INSERT INTO employee (E_id,E_name,D_O_J,Job_title,M_id,Mob,gmail) VALUES('$emp_id','$emp_name','$emp_doj','$emp_jt','$m_id','$emp_mob','$emp_gmail')";
              mysqli_query($db,$sql);      
           }
           ?>

<html>
    <head>
        
        <title>HOME|Employee Status</title>
        
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js"></script>
        <!--This is style for home page*/-->
            <script> function attSub() {
                var addEmp = document.getElementById("AddEmp");
                addEmp.style.display = "none";
                var viewAtt = document.getElementById("ViewAtt");
                viewAtt.style.display = "none";
                var yourPro = document.getElementById("YourPro");
                yourPro.style.display = "none";
                var empList = document.getElementById("EmpList");
                empList.style.display = "none";
                var Sub = document.getElementById("AttSub");
                Sub.style.display = "block";
            }
             function attSub() {
                var addEmp = document.getElementById("AddEmp");
                addEmp.style.display = "none";
                var viewAtt = document.getElementById("ViewAtt");
                viewAtt.style.display = "none";
                var yourPro = document.getElementById("YourPro");
                yourPro.style.display = "none";
                var empList = document.getElementById("EmpList");
                empList.style.display = "none";
                var Sub = document.getElementById("AttSub");
                Sub.style.display = "block";
            }
            function addEmp() {
                // var	Emp=document.getElementById("AddEmp");
                // Emp.style.display="block";
                var viewAtt = document.getElementById("ViewAtt");
                viewAtt.style.display = "none";
                var yourPro = document.getElementById("YourPro");
                yourPro.style.display = "none";
                var empList = document.getElementById("EmpList");
                empList.style.display = "none";
                var Sub = document.getElementById("AttSub");
                Sub.style.display = "none";
                var addEmp = document.getElementById("AddEmp");
                addEmp.style.display = "block";
            }
            function empList() {
                // var	empList=document.getElementById("EmpList");
                // 	empList.style.display="block";
                var viewAtt = document.getElementById("ViewAtt");
                viewAtt.style.display = "none";
                var yourPro = document.getElementById("YourPro");
                yourPro.style.display = "none";
                var Sub = document.getElementById("AttSub");
                Sub.style.display = "none";
                var addEmp = document.getElementById("AddEmp");
                addEmp.style.display = "none";
                var empList = document.getElementById("EmpList");
                empList.style.display = "block";
            }
            function viewAtt() {
                // 	var	addEmp=document.getElementById("AddEmp");
                // addEmp.style.display="none";
                // 	var viewAtt=document.getElementById("ViewAtt");
                // 	viewAtt.style.display="block";

                var yourPro = document.getElementById("YourPro");
                yourPro.style.display = "none";
                var Sub = document.getElementById("AttSub");
                Sub.style.display = "none";
                var addEmp = document.getElementById("AddEmp");
                addEmp.style.display = "none";
                var empList = document.getElementById("EmpList");
                empList.style.display = "none";
                var viewAtt = document.getElementById("ViewAtt");
                viewAtt.style.display = "block";
            }
            function yourPro() {
                // var yourPro=document.getElementById("YourPro");
                // yourPro.style.display="block";
                var Sub = document.getElementById("AttSub");
                Sub.style.display = "none";
                var addEmp = document.getElementById("AddEmp");
                addEmp.style.display = "none";
                var empList = document.getElementById("EmpList");
                empList.style.display = "none";
                var viewAtt = document.getElementById("ViewAtt");
                viewAtt.style.display = "none";
                var yourPro = document.getElementById("YourPro");
                yourPro.style.display = "block";
            }</script>
            </head>
    <body>
        <div class="jumbotron text-center" style="margin-bottom:0;background-color: #C4C4C4">
            <h1>Employye Summary</h1>

            <p>Perfection is always profitable</p>  
        </div>
        <!--Navigation bar-->
        <nav class="navbar navbar-expand-sm bg-dark navbar-dark">

            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#collapsibleNavbar">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="collapsibleNavbar">
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a class="nav-link " href="index.php" >Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">About us</a>
                    </li> 
                    <li class="nav-item">
                        <a class="nav-link active" href="#">Admin Dashboard</a>
                    </li>  
                </ul>
            </div>  
        </nav>
        <div class="container-fluid Data-body">
            <h3>welcome mr. <?php echo $admin;?></h3> 
            <div class="row">
                <div class="col-sm-2  menu-item" style="background-color:#DCD0C0;">
                    <div class="btn-group-vertical">
                        <button type="button" class="btn"  onclick="attSub()">Atte. Submit</button>
                        <button type="button" class="btn" onclick="addEmp()">Add employee</button>
                        <button type="button" class="btn"  onclick="empList()"> Employee list</button>
                        <button type="button" class="btn"  onclick="viewAtt()">View Attendance</button>
                        <button type="button" class="btn"  onclick="yourPro()">Your profile</button>
                    </div></div>
                <div class="col-sm-10 Data-container" id="container" style="background-color:rgb(171, 173, 175);;">
                    <span id="AttSub" >
                        <button type="button" class="btn-success">Present</button>
                        <h2>Attendaembn</h2>
                    </span>

                    <span id="AddEmp" style="display: none">
                        <form method="post" action="admin_action_page.php">
                            <table cellspacing="20">
                                <tr><td>Employee Id (*)</td><td><input type="text" name="Emp_id" required/></td></tr>
                                 <tr><td>Employee Name (*)
                                    </td><td><input type="text" name="Emp_name"/></td></tr>
                                  <tr><td>Date Of Joining (*)</td><td><input type="date" name="D_O_J" class="pass"/></td></tr>
                                   <tr><td>Job Title (*)</td><td><input type="text" name="J_T" class="pass"/></td></tr>
                                    <tr><td>Manager Id (*)</td><td><input type="text" name="M_id" required/></td></tr>
                                <tr><td>Mobile No. (*)</td><td><input type="text" name="Emp_mob"/></td></tr>
                                 <tr><td>Gmail (*)</td><td><input type="email" name="Emp_gmail" class="pass"/></td></tr>       
                                <tr><td></td><td><input type="Submit" name="btn_Add" value="Submit"/></td></tr>
                            </table>
                        </form>

                    </span>
                    <span id="EmpList" style="display:none">  
                        <table border="2">
                            <tr><td>S.N</td>
                            <td>Employee Name</td>
                            <td>Employee ID</td>
                            <td>Date of Joining</td>
                            <td>Job title</td>
                            <td>Mobile No.</td>
                            <td><button name="attendance">Attendance</button></td>
                            </tr>                        
                        </table>
                        
                        <?php                           
                       $sql1="SELECT E_id, E_name, D_O_J,Job_title,mob FROM employee where M_id='$admin'";
                        $retval=mysqli_query($db,$sql1);
                        while($row = mysql_fetch_array($retval, MYSQL_ASSOC)) {
                                 echo "EMP ID :{$row['E_id']}  <br> ".
                                       "EMP NAME : {$row['E_name']} <br> ".
                                        "D_O_J : {$row['D_O_J']} <br> ".
                                        "JOB Title: {$row['Job_title']} <br> ".
                                        "Mobile: {$row['Mob']} <br> ".
                                        "--------------------------------<br>";
   }
?>
                        
                    </span>
                    <span id="ViewAtt" style="display:none">It is Your Attendance </span>
                    <span id="YourPro" style="display:none"> It is your Profile</span>


                </div>
            </div>
        </div>
        <div class="footer">
            <a hef="#">About us</a>
        </div>
    </body>
</html>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         